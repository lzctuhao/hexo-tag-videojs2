function LongTab(e){function t(t,n,o,i){let u,d,h=0;t.ontouchstart=(e=>{p=0,h=0,l=e.touches[0].pageX,c=e.touches[0].pageY,u=t.clientWidth,d=t.clientHeight,a=s.currentTime,r=s.volume,h=setTimeout(()=>{n(),h=null},450)}),t.ontouchmove=(n=>{if(1!=p){clearTimeout(h),h=0;let e=n.changedTouches[0].pageX,o=n.changedTouches[0].pageY,s=e-l,a=o-c;i(t,u,e,s,d,o,a)}else e.userActive(!1)}),t.ontouchend=(()=>{h?clearTimeout(h):o()})}function n(e,t,n,o,l,u,f){function m(){function t(e){var t="",n=parseInt(e/3600),o=parseInt(e%3600/60),s=parseInt(e%3600%60);return n>0&&(t+=n+":"),o=o<10?"0"+o:o,s=s<10?"0"+s:s,t+=o+":"+s,t}p=2;let n=s.duration,o=90*b;s.currentTime=a+o,video_toast(i,t(s.currentTime),0),e.parentElement.getElementsByClassName("vjs-control-bar")[0].getElementsByClassName("vjs-progress-control")[0].getElementsByClassName("vjs-play-progress")[0].style.width=s.currentTime/n*100+"%"}function g(){function e(e,t=0,n=1){return e>=n?(c=_*l,r=s.volume,n):e<=t?(c=_*l,r=s.volume,t):e.toFixed(2)}p=3,s.volume=e(r-T),video_toast(i,"音量: "+parseInt(100*s.volume)+"%",0)}function v(){function e(e,t=.5,n=1.2){return e>=n?(c=_*l,h=n,n):e<=t?(c=_*l,h=t,t):e}p=4,d=e(h-.6*T),s.parentElement.style.filter="brightness("+d+")",video_toast(i,"亮度: "+parseInt(100*d)+"%",0)}let y=n/t,b=o/t,_=u/l,T=f/l;switch(p){case 0:Math.abs(b)>.1?m():_>.25&&_<.8&&(y>.67&&Math.abs(T)>.1?g():y<.33&&Math.abs(T)>.1&&v());break;case 2:m();break;case 3:g();break;case 4:v()}}const o=e.touchOverlay.el_;video_toast||(window.video_toast=function(){},console.warn("Cannot find function video_toast. Please include <code>mytoast.js</code> in your html."));const s=o.parentElement.getElementsByTagName("video")[0],i=o.parentElement.getElementsByClassName("toast_text")[0];let a,r,l,c,u=1,d=1,h=1,p=0;t(o,function(){e.tech_.el_.paused||(p=1,u=s.playbackRate,s.playbackRate=u<=1.25?2:3,video_toast(i,s.playbackRate+"x",0),o.classList.remove("show-play-toggle"),e.is_longtabing_=!0,e.userActive(!1))},function(){switch(video_toast(i,""),o.classList.remove("show-play-toggle"),p){case 1:e.is_longtabing_=!1,e.userActive(!1),s.playbackRate=u;break;case 2:e.userActive(!0);break;case 3:h=d}},n)}function change_key_poster(){Array.prototype.slice.call(document.getElementsByTagName("video")).forEach(e=>{"/libs/videojs2/key.png"==e.getAttribute("poster")&&e.setAttribute("poster","/libs/videojs2/key_mobile.png")})}(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,e.videojsMobileUi=t(e.videojs))})(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),o="1.1.1";const s=n.default.getComponent("Component"),i=n.default.dom||n.default;class a extends s{constructor(e,t){super(e,t),this.seekSeconds=t.seekSeconds,this.tapTimeout=t.tapTimeout,this.taps=0,this.addChild("playToggle",{}),e.on(["playing","userinactive"],e=>{this.removeClass("show-play-toggle")}),0===this.player_.options_.inactivityTimeout&&(this.player_.options_.inactivityTimeout=5e3),this.handleTaps_=n.default.fn.debounce(e=>{const t=(this.taps-1)*this.seekSeconds;if(this.taps=0,t<1)return;const n=this.el_.getBoundingClientRect(),o=e.changedTouches[0].clientX-n.left;if(o<.4*n.width)this.player_.currentTime(Math.max(0,this.player_.currentTime()-t)),this.addClass("reverse");else{if(!(o>n.width-.4*n.width))return;this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+t)),this.removeClass("reverse")}this.removeClass("show-play-toggle"),this.setAttribute("data-skip-text",`${t} ${this.localize("seconds")}`),this.removeClass("skip"),window.requestAnimationFrame(()=>{this.addClass("skip")})},this.tapTimeout),this.enable()}createEl(){const e=i.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1});return e}handleTap(e){e.target===this.el_&&(e.preventDefault(),this.taps+=1,1===this.taps&&(this.removeClass("skip"),this.player_.userActive()?(this.player_.userActive(!1),this.removeClass("show-play-toggle")):(this.player_.userActive(!0),this.addClass("show-play-toggle"))),this.handleTaps_(e))}enable(){this.firstTapCaptured=!1,this.on("touchend",this.handleTap)}disable(){this.off("touchend",this.handleTap)}}s.registerComponent("TouchOverlay",a);const r={fullscreen:{enterOnRotate:!0,exitOnRotate:!0,lockOnRotate:!0,lockToLandscapeOnEnter:!1,disabled:!1},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1,disabled:!1}},l=window.screen,c=()=>{if(l){const e=((l.orientation||{}).type||l.mozOrientation||l.msOrientation||"").split("-")[0];if("landscape"===e||"portrait"===e)return e}return"number"==typeof window.orientation?0===window.orientation||180===window.orientation?"portrait":"landscape":"portrait"},u=(e,t)=>{if(e.addClass("vjs-mobile-ui"),!t.touchControls.disabled){(t.touchControls.disableOnEnd||"function"==typeof e.endscreen)&&e.addClass("vjs-mobile-ui-disable-end");const n=e.children_.indexOf(e.getChild("ControlBar"));e.touchOverlay=e.addChild("TouchOverlay",t.touchControls,n)}if(LongTab(e),t.fullscreen.disabled)return;let o=!1;const s=()=>{const s=c();"landscape"===s&&t.fullscreen.enterOnRotate?!1===e.paused()&&(e.requestFullscreen(),(t.fullscreen.lockOnRotate||t.fullscreen.lockToLandscapeOnEnter)&&l.orientation&&l.orientation.lock&&l.orientation.lock("landscape").then(()=>{o=!0}).catch(e=>{n.default.log("Browser refused orientation lock:",e)})):"portrait"===s&&t.fullscreen.exitOnRotate&&!o&&e.isFullscreen()&&e.exitFullscreen()};(t.fullscreen.enterOnRotate||t.fullscreen.exitOnRotate)&&(n.default.browser.IS_IOS?(window.addEventListener("orientationchange",s),e.on("dispose",()=>{window.removeEventListener("orientationchange",s)})):l.orientation&&(l.orientation.onchange=s,e.on("dispose",()=>{l.orientation.onchange=null}))),e.on("fullscreenchange",s=>{e.isFullscreen()&&t.fullscreen.lockToLandscapeOnEnter&&"portrait"===c()?l.orientation.lock("landscape").then(()=>{o=!0}).catch(e=>{n.default.log("Browser refused orientation lock:",e)}):!e.isFullscreen()&&o&&(l.orientation.unlock(),o=!1)}),e.on("ended",e=>{!0===o&&(l.orientation.unlock(),o=!1)})},d=function(e={}){(e.forceForTesting||n.default.browser.IS_ANDROID||n.default.browser.IS_IOS)&&this.ready(()=>{change_key_poster(),u(this,n.default.obj.merge(r,e))})};return n.default.registerPlugin("mobileUi",d),d.VERSION=o,d});