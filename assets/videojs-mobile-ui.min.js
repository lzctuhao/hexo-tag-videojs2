/*! @name videojs-mobile-ui @version 0.7.0 @license MIT */
let origin_time,video_ele,toast_ele;function LongTab(e){video_ele=e.parentElement.getElementsByTagName("video")[0],toast_ele=e.parentElement.getElementsByClassName("toast_text")[0];let t=1;addLongtabListener(e,function(){t=video_ele.playbackRate,video_ele.playbackRate=3},function(){video_ele.playbackRate=t,toast_ele.style.opacity=0},forward)}function forward(e,t){let o=video_ele.duration,n=t*o*.8;var i,r,a,l,s;video_ele.currentTime=origin_time+n,toast_ele.innerHTML=(i=video_ele.currentTime,r="",a=parseInt(i/3600),l=parseInt(i%3600/60),s=parseInt(i%3600%60),a>0&&(r+=(a=a<10?"0"+a:a)+":"),r+=(l=l<10?"0"+l:l)+":"+(s=s<10?"0"+s:s)),toast_ele.style.opacity=1,e.parentElement.getElementsByClassName("vjs-control-bar")[0].getElementsByClassName("vjs-progress-control")[0].getElementsByClassName("vjs-play-progress")[0].style.width=video_ele.currentTime/o*100+"%"}function addLongtabListener(e,t,o,n){let i,r=e.clientWidth,a=0,l=!1;e.ontouchstart=(e=>{i=e.touches[0].pageX,origin_time=video_ele.currentTime,a=0,a=setTimeout(()=>{l=!0,t(),a=0},1e3)}),e.ontouchmove=(t=>{if(!l){clearTimeout(a),a=0;let o=t.changedTouches[0].pageX-i;n(e,o/r)}}),e.ontouchend=(()=>{a?clearTimeout(a):o()})}function change_key_poster(){Array.prototype.slice.call(document.getElementsByTagName("video")).forEach(e=>{"/libs/videojs2/key.png"==e.getAttribute("poster")&&e.setAttribute("poster","/libs/videojs2/key_mobile.png")})}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["video.js","global/window"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsMobileUi=t(e.videojs,e.window)}(this,function(e,t){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(e),i=o(t);function r(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports}var a=r(function(e){function t(o,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(o,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),l=r(function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0}),s=n.default.getComponent("Component"),u=n.default.dom||n.default,d=function(e){function t(t,o){var n;return(n=e.call(this,t,o)||this).seekSeconds=o.seekSeconds,n.tapTimeout=o.tapTimeout,n.addChild("playToggle",{}),t.on(["playing","userinactive"],function(e){n.removeClass("show-play-toggle")}),0===n.player_.options_.inactivityTimeout&&(n.player_.options_.inactivityTimeout=5e3),n.enable(),n}l(t,e);var o=t.prototype;return o.createEl=function(){return window.overlay_ele=u.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1}),window.overlay_ele},o.handleTap=function(e){var t=this;e.target===this.el_&&(e.preventDefault(),this.firstTapCaptured?(this.firstTapCaptured=!1,this.timeout&&i.default.clearTimeout(this.timeout),this.handleDoubleTap(e)):(this.firstTapCaptured=!0,this.timeout=i.default.setTimeout(function(){t.firstTapCaptured=!1,t.handleSingleTap(e)},this.tapTimeout)))},o.handleSingleTap=function(e){this.removeClass("skip"),this.toggleClass("show-play-toggle")},o.handleDoubleTap=function(e){var t=this,o=this.el_.getBoundingClientRect(),n=e.changedTouches[0].clientX-o.left;if(n<.4*o.width)this.player_.currentTime(Math.max(0,this.player_.currentTime()-this.seekSeconds)),this.addClass("reverse");else{if(!(n>o.width-.4*o.width))return;this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+this.seekSeconds)),this.removeClass("reverse")}this.removeClass("show-play-toggle"),this.removeClass("skip"),i.default.requestAnimationFrame(function(){t.addClass("skip")})},o.enable=function(){this.firstTapCaptured=!1,this.on("touchend",this.handleTap)},o.disable=function(){this.off("touchend",this.handleTap)},t}(s);s.registerComponent("TouchOverlay",d);var c={fullscreen:{enterOnRotate:!0,exitOnRotate:!0,lockOnRotate:!0,iOS:!1,disabled:!1},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1,disabled:!1}},p=i.default.screen,f=n.default.registerPlugin||n.default.plugin,h=function(e){var t=this;void 0===e&&(e={}),(e.forceForTesting||n.default.browser.IS_ANDROID||n.default.browser.IS_IOS)&&this.ready(function(){change_key_poster(),function(e,t){if(e.addClass("vjs-mobile-ui"),t.fullscreen.iOS&&(n.default.log.warn("videojs-mobile-ui: `fullscreen.iOS` is deprecated. Use Video.js option `preferFullWindow` instead."),n.default.browser.IS_IOS&&n.default.browser.IOS_VERSION>9&&!e.el_.ownerDocument.querySelector(".bc-iframe")&&(e.tech_.el_.setAttribute("playsinline","playsinline"),e.tech_.supportsFullScreen=function(){return!1})),!t.touchControls.disabled){var o;(t.touchControls.disableOnEnd||"function"==typeof e.endscreen)&&e.addClass("vjs-mobile-ui-disable-end");var r=n.default.VERSION.split("."),a=parseInt(r[0],10),l=parseInt(r[1],10);o=a<7||7===a&&l<7?Array.prototype.indexOf.call(e.el_.children,e.getChild("ControlBar").el_):e.children_.indexOf(e.getChild("ControlBar")),e.touchOverlay=e.addChild("TouchOverlay",t.touchControls,o)}if(LongTab(e.touchOverlay.el_),!t.fullscreen.disabled){var s=!1,u=function(){var o=function(){if(p){var e=((p.orientation||{}).type||p.mozOrientation||p.msOrientation||"").split("-")[0];if("landscape"===e||"portrait"===e)return e}return"number"==typeof i.default.orientation?0===i.default.orientation||180===i.default.orientation?"portrait":"landscape":"portrait"}();"landscape"===o&&t.fullscreen.enterOnRotate?!1===e.paused()&&(e.requestFullscreen(),t.fullscreen.lockOnRotate&&p.orientation&&p.orientation.lock&&p.orientation.lock("landscape").then(function(){s=!0}).catch(function(e){n.default.log("Browser refused orientation lock:",e)})):"portrait"===o&&t.fullscreen.exitOnRotate&&!s&&e.isFullscreen()&&e.exitFullscreen()};(t.fullscreen.enterOnRotate||t.fullscreen.exitOnRotate)&&(n.default.browser.IS_IOS?(i.default.addEventListener("orientationchange",u),e.on("dispose",function(){i.default.removeEventListener("orientationchange",u)})):p.orientation&&(p.orientation.onchange=u,e.on("dispose",function(){p.orientation.onchange=null})),e.on("fullscreenchange",function(t){!e.isFullscreen()&&s&&(p.orientation.unlock(),s=!1)})),e.on("ended",function(e){!0===s&&(p.orientation.unlock(),s=!1)})}}(t,n.default.mergeOptions(c,e))})};return f("mobileUi",h),h.VERSION="0.7.0",h});