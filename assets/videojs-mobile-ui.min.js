function LongTab(e){function t(e,t,n,s){let c,u,d=0,p=!1;e.ontouchstart=(n=>{h=0,p=!1,d=0,r=n.touches[0].pageX,l=n.touches[0].pageY,c=e.clientWidth,u=e.clientHeight,i=o.currentTime,a=o.volume,n.preventDefault(),d=setTimeout(()=>{p=!0,t(),d=0},450)}),e.ontouchmove=(t=>{if(!p){clearTimeout(d),d=0;let n=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY,i=n-r,a=o-l;s(e,c,n,i,u,o,a)}}),e.ontouchend=(()=>{d?clearTimeout(d):n()})}function n(e,t,n,r,c,p,f){function m(){function t(e){var t="",n=parseInt(e/3600),o=parseInt(e%3600/60),s=parseInt(e%3600%60);return n>0&&(t+=n+":"),o=o<10?"0"+o:o,s=s<10?"0"+s:s,t+=o+":"+s,t}h=1;let n=o.duration,a=b*n*.8;o.currentTime=i+a,video_toast(s,t(o.currentTime),0),e.parentElement.getElementsByClassName("vjs-control-bar")[0].getElementsByClassName("vjs-progress-control")[0].getElementsByClassName("vjs-play-progress")[0].style.width=o.currentTime/n*100+"%"}function g(){function e(e,t=0,n=1){return e>=n?(l=T*c,a=o.volume,n):e<=t?(l=T*c,a=o.volume,t):e.toFixed(2)}h=2,o.volume=e(a-_),video_toast(s,"音量: "+parseInt(100*o.volume)+"%",0)}function v(){function e(e,t=.5,n=1.2){return e>=n?(l=T*c,d=n,n):e<=t?(l=T*c,d=t,t):e}h=3,u=e(d-.6*_),o.parentElement.style.filter="brightness("+u+")",video_toast(s,"亮度: "+parseInt(100*u)+"%",0)}let y=n/t,b=r/t,T=p/c,_=f/c;switch(h){case 0:Math.abs(b)>.1?m():y>.67&&Math.abs(_)>.1?g():y<.33&&Math.abs(_)>.1&&v();break;case 1:m();break;case 2:g();break;case 3:v()}}video_toast||(video_toast=function(){},console.warn("Cannot find function video_toast. Please include <code>mytoast.js</code> in your html."));const o=e.parentElement.getElementsByTagName("video")[0],s=e.parentElement.getElementsByClassName("toast_text")[0];let i,a,r,l,c=1,u=1,d=1,h=0;t(e,function(){c=o.playbackRate,o.playbackRate=c<=1.25?2:3,video_toast(s,o.playbackRate+"x",0),document.querySelector(".vjs-touch-overlay").classList.remove("show-play-toggle")},function(){o.playbackRate=c,d=u,video_toast(s,""),document.querySelector(".vjs-touch-overlay").classList.remove("show-play-toggle")},n)}function change_key_poster(){Array.prototype.slice.call(document.getElementsByTagName("video")).forEach(e=>{"/libs/videojs2/key.png"==e.getAttribute("poster")&&e.setAttribute("poster","/libs/videojs2/key_mobile.png")})}(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,e.videojsMobileUi=t(e.videojs))})(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),o="1.1.1";const s=n.default.getComponent("Component"),i=n.default.dom||n.default;class a extends s{constructor(e,t){super(e,t),this.seekSeconds=t.seekSeconds,this.tapTimeout=t.tapTimeout,this.taps=0,this.addChild("playToggle",{}),e.on(["playing","userinactive"],e=>{this.removeClass("show-play-toggle")}),0===this.player_.options_.inactivityTimeout&&(this.player_.options_.inactivityTimeout=5e3),this.handleTaps_=n.default.fn.debounce(e=>{const t=(this.taps-1)*this.seekSeconds;if(this.taps=0,t<1)return;const n=this.el_.getBoundingClientRect(),o=e.changedTouches[0].clientX-n.left;if(o<.4*n.width)this.player_.currentTime(Math.max(0,this.player_.currentTime()-t)),this.addClass("reverse");else{if(!(o>n.width-.4*n.width))return;this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+t)),this.removeClass("reverse")}this.removeClass("show-play-toggle"),this.setAttribute("data-skip-text",`${t} ${this.localize("seconds")}`),this.removeClass("skip"),window.requestAnimationFrame(()=>{this.addClass("skip")})},this.tapTimeout),this.enable()}createEl(){const e=i.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1});return e}handleTap(e){e.target===this.el_&&(e.preventDefault(),this.taps+=1,1===this.taps&&(this.removeClass("skip"),this.toggleClass("show-play-toggle")),this.handleTaps_(e))}enable(){this.firstTapCaptured=!1,this.on("touchend",this.handleTap)}disable(){this.off("touchend",this.handleTap)}}s.registerComponent("TouchOverlay",a);const r={fullscreen:{enterOnRotate:!0,exitOnRotate:!0,lockOnRotate:!0,lockToLandscapeOnEnter:!1,disabled:!1},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1,disabled:!1}},l=window.screen,c=()=>{if(l){const e=((l.orientation||{}).type||l.mozOrientation||l.msOrientation||"").split("-")[0];if("landscape"===e||"portrait"===e)return e}return"number"==typeof window.orientation?0===window.orientation||180===window.orientation?"portrait":"landscape":"portrait"},u=(e,t)=>{if(e.addClass("vjs-mobile-ui"),!t.touchControls.disabled){(t.touchControls.disableOnEnd||"function"==typeof e.endscreen)&&e.addClass("vjs-mobile-ui-disable-end");const n=e.children_.indexOf(e.getChild("ControlBar"));e.touchOverlay=e.addChild("TouchOverlay",t.touchControls,n)}if(LongTab(e.touchOverlay.el_),t.fullscreen.disabled)return;let o=!1;const s=()=>{const s=c();"landscape"===s&&t.fullscreen.enterOnRotate?!1===e.paused()&&(e.requestFullscreen(),(t.fullscreen.lockOnRotate||t.fullscreen.lockToLandscapeOnEnter)&&l.orientation&&l.orientation.lock&&l.orientation.lock("landscape").then(()=>{o=!0}).catch(e=>{n.default.log("Browser refused orientation lock:",e)})):"portrait"===s&&t.fullscreen.exitOnRotate&&!o&&e.isFullscreen()&&e.exitFullscreen()};(t.fullscreen.enterOnRotate||t.fullscreen.exitOnRotate)&&(n.default.browser.IS_IOS?(window.addEventListener("orientationchange",s),e.on("dispose",()=>{window.removeEventListener("orientationchange",s)})):l.orientation&&(l.orientation.onchange=s,e.on("dispose",()=>{l.orientation.onchange=null}))),e.on("fullscreenchange",s=>{e.isFullscreen()&&t.fullscreen.lockToLandscapeOnEnter&&"portrait"===c()?l.orientation.lock("landscape").then(()=>{o=!0}).catch(e=>{n.default.log("Browser refused orientation lock:",e)}):!e.isFullscreen()&&o&&(l.orientation.unlock(),o=!1)}),e.on("ended",e=>{!0===o&&(l.orientation.unlock(),o=!1)})},d=function(e={}){(e.forceForTesting||n.default.browser.IS_ANDROID||n.default.browser.IS_IOS)&&this.ready(()=>{change_key_poster(),u(this,n.default.obj.merge(r,e))})};return n.default.registerPlugin("mobileUi",d),d.VERSION=o,d});